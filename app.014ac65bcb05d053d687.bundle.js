"use strict";(self.webpackChunkBattleship=self.webpackChunkBattleship||[]).push([[524],{278:(e,t,o)=>{o.d(t,{_Q:()=>d,dc:()=>i,u7:()=>a,Uj:()=>h,kY:()=>u,_y:()=>r,LK:()=>c,bX:()=>m});const n=o.p+"assets/static.gif",s=o.p+"assets/static.mp3",l=new Audio(s);function a(e){document.getElementById(e.id+"-container").style.display="flex";const t=document.getElementById(e.id);t.innerHTML="";for(let o=0;o<10;o++)for(let n=0;n<10;n++){const s=document.createElement("div");s.classList.add("cell");const l=e.gameboard.board[o][n];l&&"object"==typeof l&&null!==l&&"Computer"!==e.name&&s.classList.add("ship"),s.setAttribute("coords",`${o},${n}`),t.appendChild(s)}}function r(e,t){const o=document.getElementById(e.id),[n,s]=t,l=o.querySelector(`[coords="${n},${s}"]`),a=e.gameboard.board[n][s];if(a&&"object"==typeof a&&null!==a&&a.isSunk()){l.classList.add("hit");a.coords.reverse().forEach(((e,t)=>{setTimeout((()=>{const[t,n]=e;o.querySelector(`[coords="${t},${n}"]`).classList.add("sunk")}),200*t)}))}else e.gameboard.misses.some((e=>e[0]===n&&e[1]===s))?l.classList.add("miss"):e.gameboard.hits.some((e=>e[0]===n&&e[1]===s))&&(l.classList.remove("ship"),l.classList.add("hit"))}function c(e,t){const o=document.getElementById(e.id),[n,s]=t;o.querySelector(`[coords="${n},${s}"]`).classList.add("ship")}function i(e){document.getElementById(e.id).querySelectorAll(".cell").forEach((e=>{e.classList.remove("ship")}))}function d(){document.getElementById("title").textContent="Control Center";const e=document.getElementById("fleet-dock"),t=document.getElementById("deploy-button");e.style.display="none",t.style.display="none"}function u(){"true"===localStorage.getItem("sfxEnabled")&&(l.volume=.2,l.play(),setTimeout((()=>{l.pause(),l.currentTime=0}),550));const e=document.createElement("img");e.src=n,e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.zIndex="9998",e.style.opacity="0.2",e.style.pointerEvents="none",e.style.transition="opacity 0.1s ease-in-out",document.body.appendChild(e),setTimeout((()=>{e.style.opacity="0",setTimeout((()=>{document.body.removeChild(e)}),300)}),300)}function m(){const e=document.getElementById("gameboards"),t=document.getElementById("title"),o=document.getElementById("game-over-screen"),n=document.getElementById("game-win-message");o.style.display="flex",n.style.display="block",e.style.display="none",t.style.display="none"}function h(){const e=document.getElementById("gameboards"),t=document.getElementById("title"),o=document.getElementById("game-over-screen"),n=document.getElementById("game-lose-message");document.getElementById("back-to-menu-button");o.style.display="flex",n.style.display="block",e.style.display="none",t.style.display="none",document.body.style.flexDirection="column",document.body.style.backgroundColor="var(--background-color-lose)",document.body.style.color="var(--text-color)",document.body.style.margin="0",document.body.style.padding="0",document.body.style.display="flex",document.body.style.justifyContent="center",document.body.style.alignItems="center",document.body.style.height="100vh",document.body.style.width="100vw",document.body.style.position="relative",document.body.style.filter="contrast(1.1) brightness(1.2) blur(0.6px)",document.body.style.animation="fadeIn 1s ease-out",document.body.style.boxSizing="border-box";const s=document.createElement("style");s.innerHTML='\n    body::before {\n      content: "";\n      position: absolute;\n      inset: 0;\n      background: repeating-linear-gradient(\n        to bottom,\n        var(--scanline-color-lose) 0%,\n        var(--scanline-color-lose) 0.064rem,\n        transparent 0.0625rem,\n        transparent 0.3rem\n      ),\n      radial-gradient(circle, transparent, transparent 70%, rgba(0, 0, 0, 0.5));\n      animation: scanlines 0.5s infinite;\n      pointer-events: none;\n      z-index: 9998;\n    }\n    #back-to-menu-button:hover {\n      background-color: var(--cell-highlight-color-lose);\n    }\n    #back-to-menu-button {\n      background-color: var(--board-bg-color-lose);\n      color: var(--cell-hit-color);\n      border: 0.25rem solid var(--board-border-color-lose);\n    }\n  ',document.head.appendChild(s)}},499:(e,t,o)=>{o.d(t,{Ay:()=>E,m7:()=>y,Ak:()=>g});var n=o(278);const s=o.p+"assets/place.wav",l=o.p+"assets/error.wav";var a=o(683);const r=o.p+"assets/trash.wav",c=o.p+"assets/deploy.wav",i=new Audio(a),d=new Audio(s),u=new Audio(l),m=new Audio(r),h=new Audio(c);function g(e){"true"===localStorage.getItem("sfxEnabled")&&e.play()}function y(e){"true"===localStorage.getItem("musicEnabled")&&(e.volume=.5,e.play().catch((e=>{})),e.loop=!0)}function p(e){e.target.classList.add("dragging")}function b(e){e.target.classList.remove("dragging")}function f(e){if(document.getElementById("ship-placement").classList.contains("vertical.container")){e.preventDefault();const t=e.target,[o,n]=t.getAttribute("coords").split(",").map(Number),s=document.querySelector(".dragging").children.length;t.classList.add("highlight");for(let e=0;e<s;e++){const t=n-s+1>=0?n-e:n+e;document.querySelector(`[coords="${o},${t}"]`).classList.add("highlight")}}else{e.preventDefault();const t=e.target,[o,n]=t.getAttribute("coords").split(",").map(Number),s=document.querySelector(".dragging").children.length;t.classList.add("highlight");for(let e=0;e<s;e++){const t=o-s+1>=0?o-e:o+e;document.querySelector(`[coords="${t},${n}"]`).classList.add("highlight")}}}function v(e){document.querySelectorAll(".cell").forEach((e=>{e.classList.remove("highlight")}))}function E(e){return new Promise((t=>{const o=document.querySelectorAll(".ship-draggable"),s=document.querySelectorAll(".cell");o.forEach((e=>{e.addEventListener("dragstart",p),e.addEventListener("dragend",b)})),s.forEach((t=>{t.addEventListener("dragover",f),t.addEventListener("dragleave",v),t.addEventListener("drop",(t=>function(e,t){if(document.getElementById("ship-placement").classList.contains("vertical.container")){e.preventDefault();try{const e=document.querySelectorAll(".highlight"),o=Array.from(e).reduce(((e,t)=>{const[o]=t.getAttribute("coords").split(",").map(Number),[n]=e.getAttribute("coords").split(",").map(Number);return o<n?t:e}),e[0]),[s,l]=o.getAttribute("coords").split(",").map(Number);e.forEach((e=>{const o=e.getAttribute("coords").split(",").map(Number);t.gameboard.checkCollision(o[0],o[1])})),t.gameboard.place([s,l],e.length,1),e.forEach((e=>{e.classList.remove("highlight");const o=e.getAttribute("coords").split(",").map(Number);(0,n.LK)(t,o)})),g(d);const a=document.querySelector(".dragging");a.classList.add("placed"),a.draggable=!1}catch(e){g(u),document.querySelectorAll(".cell").forEach((e=>{e.classList.remove("highlight")}))}}else{e.preventDefault();try{const e=document.querySelectorAll(".highlight"),o=Array.from(e).reduce(((e,t)=>{const[o]=t.getAttribute("coords").split(",").map(Number),[n]=e.getAttribute("coords").split(",").map(Number);return o<n?t:e}),e[0]),[s,l]=o.getAttribute("coords").split(",").map(Number);e.forEach((e=>{const o=e.getAttribute("coords").split(",").map(Number);t.gameboard.checkCollision(o[0],o[1])})),t.gameboard.place([s,l],e.length,0),e.forEach((e=>{e.classList.remove("highlight");const o=e.getAttribute("coords").split(",").map(Number);(0,n.LK)(t,o)})),g(d);const a=document.querySelector(".dragging");a.classList.add("placed"),a.draggable=!1}catch(e){g(u),document.querySelectorAll(".cell").forEach((e=>{e.classList.remove("highlight")}))}}}(t,e)))})),function(){const e=document.getElementById("rotate-button"),t=document.getElementById("ship-placement"),o=document.querySelectorAll(".ship-draggable");e.addEventListener("click",(()=>{g(i),t.classList.contains("vertical.container")?(t.classList.remove("vertical.container"),o.forEach((e=>{e.style.flexDirection="row"}))):(t.classList.add("vertical.container"),t.style.flexDirection="row",t.style.flexWrap="wrap",o.forEach((e=>{e.style.flexDirection="column"})))}))}(),function(){const t=document.getElementById("trash-button");t.addEventListener("click",(()=>{g(m),e.gameboard.ships=[],e.gameboard.board=Array.from({length:10},(()=>Array(10).fill(null))),(0,n.dc)(e);document.querySelectorAll(".ship-draggable").forEach((e=>{e.classList.remove("placed"),e.draggable=!0}))}))}(),function(){const o=document.getElementById("deploy-button");o.addEventListener("click",(()=>{e.gameboard.ships.length<5?g(u):((0,n.kY)(),g(h),t())}))}()}))}},997:(e,t,o)=>{o.a(e,(async(e,t)=>{try{var n=o(318),s=o(683),l=o(695),a=o(18),r=o(915),c=o(278),i=o(300),d=o(339),u=o(756),m=o(499),h=o(911),g=o.n(h);document.addEventListener("DOMContentLoaded",(()=>{g().replace()}));const e=new Audio(s),y=new Audio(l),p=new Audio(a),b=new Audio(r),f=new i.A("Player 1","p1-board"),v=new i.A("Computer","p2-board");await(0,n.B)(),(0,c.u7)(f),await(0,m.Ay)(f),(0,c._Q)(),async function(t,o,s=0){for(n.l.pause(),document.getElementById("p1-board-container").style.pointerEvents="none",(0,m.m7)(b),(0,u.D)(o),(0,c.u7)(t),(0,c.u7)(o);!1===f.gameboard.isDefeated()&&!1===v.gameboard.isDefeated();)if(0===s){let e=await(0,d.V4)();for(;(0,d.Ud)(e,o);)e=await(0,d.V4)();o.gameboard.receiveAttack(e),(0,c._y)(o,e),s=1}else{const e=await(0,d.MC)(t.gameboard);t.gameboard.receiveAttack(e),(0,c._y)(t,e),s=0}if(t.gameboard.isDefeated()){b.pause(),(0,c.kY)(),(0,m.m7)(p),(0,c.Uj)();document.getElementById("back-to-menu-button").addEventListener("click",(()=>{(0,m.Ak)(e),location.reload()}))}else{b.pause(),(0,c.kY)(),(0,m.m7)(y),(0,c.bX)();document.getElementById("back-to-menu-button").addEventListener("click",(()=>{(0,m.Ak)(e),location.reload()}))}}(f,v),t()}catch(e){t(e)}}),1)},339:(e,t,o)=>{function n(){return new Promise((e=>{document.querySelectorAll(".cell").forEach((t=>{t.addEventListener("click",(function(){const o=t.getAttribute("coords").split(",").map((e=>parseInt(e,10)));e(o)}))}))}))}function s(e){return new Promise((t=>{setTimeout((()=>{let o;e.lastHitShip&&!e.lastHitShip.isSunk()&&(o=function(e){const t=e.available,o=e.lastHitShip.coords.map((e=>[e[0],e[1]])),n=t.filter((e=>o.some((t=>t[0]===e[0]&&t[1]===e[1]))));return Math.random()<.8?n[Math.floor(Math.random()*n.length)]:t[Math.floor(Math.random()*t.length)]}(e)),o||(o=e.available[Math.floor(Math.random()*e.available.length)]);const{ship:n,hit:s}=function(e,t){const o=t.find((t=>t.coords.some((t=>t[0]===e[0]&&t[1]===e[1]))));if(o)return{ship:o,hit:!0};return{ship:null,hit:!1}}(o,e.ships);s&&(e.lastHitShip=n),t(o)}),500)}))}function l(e,t){return!(!t.gameboard.hits.some((t=>t[0]===e[0]&&t[1]===e[1]))&&!t.gameboard.misses.some((t=>t[0]===e[0]&&t[1]===e[1])))}o.d(t,{MC:()=>s,Ud:()=>l,V4:()=>n})},318:(e,t,o)=>{o.d(t,{l:()=>r,B:()=>d});const n=o.p+"assets/dockingSong.mp3",s=o.p+"assets/menuSong.mp3";var l=o(278),a=o(683);const r=new Audio(n),c=new Audio(s),i=new Audio(a);function d(){return new Promise((e=>{const t=document.querySelectorAll("#menu-buttons button"),o=document.getElementById("menu-ascii"),n=document.getElementById("start-game-button"),s=document.getElementById("gameboards"),a=document.getElementById("deploy-button"),d=document.getElementById("title"),u=document.getElementById("settings-button");let m=localStorage.getItem("musicEnabled"),h=localStorage.getItem("sfxEnabled");null===m?(m=!0,localStorage.setItem("musicEnabled",m)):m="true"===m,null===h?(h=!0,localStorage.setItem("sfxEnabled",h)):h="true"===h,m&&(c.volume=.5,c.play().catch((e=>{})),c.loop=!0),i.muted=!h,t.forEach((e=>{e.addEventListener("click",(()=>{h&&i.play()}))})),u.addEventListener("click",(()=>{const e=document.getElementById("settings-modal"),t=e.querySelector(".close-button"),o=document.getElementById("music-checkbox"),n=document.getElementById("sfx-checkbox");o.checked=m,n.checked=h,e.style.display="flex",t.addEventListener("click",(()=>{h&&i.play(),e.style.display="none"}))}));document.getElementById("save-settings-button").addEventListener("click",(()=>{m=document.getElementById("music-checkbox").checked,h=document.getElementById("sfx-checkbox").checked,localStorage.setItem("musicEnabled",m),localStorage.setItem("sfxEnabled",h);document.getElementById("settings-modal").style.display="none",m?(c.volume=.5,c.play().catch((e=>{})),c.loop=!0):c.pause(),i.muted=!h})),n.addEventListener("click",(()=>{(0,l.kY)(),m&&(c.pause(),r.volume=.5,r.play().catch((e=>{})),r.loop=!0),document.querySelector("#menu-buttons").style.display="none",o.style.display="none",s.style.display="flex",a.style.display="block",d.style.display="block",e()}))}))}},756:(e,t,o)=>{function n(e){const t=Math.floor(10*Math.random()),o=Math.floor(10*Math.random()),n=Math.floor(2*Math.random());return[[t,o],e[0],n]}function s(e){const t=[],o=[5,4,3,3,2];for(;t.length<5;){const[s,l,a]=n(o);try{e.gameboard.place(s,l,a),t.push([s,l,a]),o.shift()}catch(e){}}}o.d(t,{D:()=>s})},300:(e,t,o)=>{o.d(t,{A:()=>u});class n{constructor(e){this.orientation=null,this.length=e,this.hits=0,this.coords=[]}hit(){this.hits<this.length&&this.hits++}isSunk(){return this.hits===this.length}}const s=o.p+"assets/hit.wav",l=o.p+"assets/miss.wav",a=o.p+"assets/sunk.wav",r=new Audio(l),c=new Audio(s),i=new Audio(a);class d{constructor(){this.board=Array.from({length:10},(()=>Array(10).fill(null))),this.ships=[],this.misses=[],this.hits=[],this.available=[];for(let e=0;e<10;e++)for(let t=0;t<10;t++)this.available.push([e,t]);this.lastHitShip=null}validateCoordinates(e,t){if(e<0||e>9||t<0||t>9)throw new Error("Coordinates out of bounds!")}checkBoundary(e,t,o,n){if(0===n&&e+o>10||1===n&&t+o>10)throw new Error("Ship would exceed board!")}checkCollision(e,t){if(this.ships.some((o=>o.coords.some((o=>o[0]===e&&o[1]===t)))))throw new Error("Ship already placed here!")}place(e,t,o){const[s,l]=e;this.validateCoordinates(s,l),this.checkBoundary(s,l,t,o);for(let e=0;e<t;e++){const t=0===o?s+e:s,n=1===o?l+e:l;this.checkCollision(t,n)}const a=new n(t);for(let e=0;e<t;e++){const t=0===o?s+e:s,n=1===o?l+e:l;this.board[t][n]=a,a.coords.push([t,n])}this.ships.push(a)}receiveAttack(e){const[t,o]=e;this.validateCoordinates(t,o);let n=this.board[t][o];if(null===n)"true"===localStorage.getItem("sfxEnabled")&&r.play(),this.board[t][o]="MISS",this.misses.push(e),this.available.findIndex(((e,n)=>e[0]===t&&e[1]===o&&this.available.splice(n,1)));else{if(this.hits.some((t=>t[0]===e[0]&&t[1]===e[1]||"MISS"===n)))throw new Error("Cannot interact with cell twice!");n.hit(),"true"===localStorage.getItem("sfxEnabled")&&(n.isSunk()?i.play():c.play()),this.hits.push(e),this.available.findIndex(((e,n)=>e[0]===t&&e[1]===o&&this.available.splice(n,1)))}}isDefeated(){return this.ships.every((e=>e.isSunk()))}}class u{constructor(e,t){this.name=e,this.id=t,this.gameboard=new d}}},915:(e,t,o)=>{e.exports=o.p+"assets/battleSong.mp3"},18:(e,t,o)=>{e.exports=o.p+"assets/loseSong.mp3"},683:(e,t,o)=>{e.exports=o.p+"assets/rotate.wav"},695:(e,t,o)=>{e.exports=o.p+"assets/winSong.mp3"}},e=>{e.O(0,[911],(()=>{return t=997,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=app.014ac65bcb05d053d687.bundle.js.map